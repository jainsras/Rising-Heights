
{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Quiz</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

</head>

<body>
    <section class="hero is-primary">
        <div class="hero-body">
            <div class="container">
                <h1 class="title">
                    Take a small survey
                </h1>
            </div>
        </div>
    </section>

    <section class="section">
        <div class="container">
        <form   action="/quiz/result" name="quiz"  method="" id="formfill"> {% csrf_token %}
        {% comment %} <form  name="quiz"   id="formfill"> {% csrf_token %} {% endcomment %}
        
            <ol>
            {% for que in questions %}
                        <div class="content">
                            
                                <li><h3>{{que.question}}</h3></li>
                                
                                <div>
                                <input type="radio" id="one{{que.id}}" name="c{{que.id}}" value="one" required>  
                                <label for="one{{que.id}}">Rarely</label><br>
                                <input type="radio" id="two{{que.id}}" name="c{{que.id}}" value="two">
                                <label for="two{{que.id}}">Sometimes</label><br>
                               <input type="radio" id="three{{que.id}}" name="c{{que.id}}" value="three">
                                <label for="three{{que.id}}">Often</label><br>
                                
                                <input type="radio" id="four{{que.id}}" name="c{{que.id}}" value="four">
                                <label for="four{{que.id}}">Very Often</label><br>
                                
                                </div>
                                
                            
                        </div>
                   
            {% endfor %}
        </ol>
        
        <p id ="result" name="result" hidden>  </p>
        
        <button type="submit" name="save"  class="btn btn-info" id="save" onclick="check()">Submit</button>
        </form>
        </div>
    
  
    </section>
    <footer class="footer">
    </footer>
    <script>
    {% comment %} document.querySelector('#save').addEventListener('click', check); {% endcomment %}

    function check(){
        var res = 0;
        var q1 = document.quiz.c1.value;
        var q2 = document.quiz.c2.value;
        var q3 = document.quiz.c3.value;
        var q4 = document.quiz.c4.value;
        var q5 = document.quiz.c5.value;
        var q6 = document.quiz.c6.value;
        var q7 = document.quiz.c7.value;
        var q8 = document.quiz.c8.value;
        var q9 = document.quiz.c9.value;
        var q10 = document.quiz.c10.value; 
        var quiz = document.getElementById("formfill");
        
        if(q1==="one")res+=1;
        else if(q1==="two")res+=4;
        else if(q1==="three")res+=7;
        else res+=9;

        if(q2==="one")res+=1;
        else if(q2==="two")res+=4;
        else if(q2==="three")res+=7;
        else res+=9;
        
        if(q3==="one")res+=1;
        else if(q3==="two")res+=4;
        else if(q3==="three")res+=7;
        else res+=9;
        
        if(q4==="one")res+=1;
        else if(q4==="two")res+=4;
        else if(q4==="three")res+=7;
        else res+=9;
        
        if(q5==="one")res+=1;
        else if(q5==="two")res+=4;
        else if(q5==="three")res+=7;
        else res+=9;

        if(q6==="one")res+=1;
        else if(q6==="two")res+=4;
        else if(q6==="three")res+=7;
        else res+=9;
        
        if(q7==="one")res+=1;
        else if(q7==="two")res+=4;
        else if(q7==="three")res+=7;
        else res+=9;

        if(q8==="one")res+=1;
        else if(q8==="two")res+=4;
        else if(q8==="three")res+=7;
        else res+=9;

        if(q9==="one")res+=1;
        else if(q9==="two")res+=4;
        else if(q9==="three")res+=7;
        else res+=9;

        if(q10==="one")res+=1;
        else if(q10==="two")res+=4;
        else if(q10==="three")res+=7;
        else res+=9; 

        {% comment %} quiz.style.display="none"; {% endcomment %}

        res = res/10;
        let ans;
        {% comment %} console.log(res); {% endcomment %}
        if(res>=0 && res<=2)
        ans= "Normal Condition";
        else if(res>=3 && res<=5)
        ans= "Mild Depression";
        else if(res>=6 && res<=8)
        ans= "Moderate Depression";
        else if(res>=9 && res<=10)
        ans= "Severe Depression";
        document.getElementById('result').innerHTML=ans;
        {% comment %} {{answer}}="severe"; {% endcomment %}
        {% comment %} document.querySelector('#result').textContent=ans; {% endcomment %}
    
        {% comment %} console.log(ans); {% endcomment %}
        
       

    }
    
    </script>
</body>

</html>